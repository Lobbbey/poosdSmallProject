<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="description" content="This is a contact manager made for a course project">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neptune Contacts</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="/css/contacts.css">
    <script src="js/code.js"></script>
    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            readCookie();
            searchContact();
            setupPagination();
        }, false);
    </script>
</head>

<body onclick="spawnStar(event)">
    <header>
        <button class="top-right-button" id="logoutButton" onclick="doLogout();">Logout</button>
    </header>
    <div class="search-container">
        <input type="text" id="searchText" oninput="searchContact()" placeholder="Search Contacts"/>
        <button class="open-btn" onclick="openModal()"><span class="material-icons">person_add</span></button>
        <span id="contactSearchRes"></span>
        <!-- The Modal -->
        <div id="popupModal" class="modal">
            <div class="modal-content">
                <span class="close-btn" onclick="closeModal()">&times;</span>
                <h2>New Contact</h2>
                <table id="editableTable">
                    <tr>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Phone Number</th>
                        <th>Email</th>
                    </tr>
                    <tr>
                        <td><input class="input_box" type="text" id="addFirst" placeholder="First Name" required></td>
                        <td><input class="input_box" type="text" id="addLast" placeholder="Last Name" required></td>
                        <td><input class="input_box" type="text" id="addPhone" placeholder="XXX-XXX-XXXX" required></td>
                        <td><input class="input_box" type="text" id="addEmail" placeholder="example@email.com" required></td>
                    </tr>
                </table>
                <span id="addContactResult"></span>
                <br>
                <button type="button" id="addContactButton" class="buttons font" onclick="addContact();"> Add Contact</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="tbl-content" id="contactsTable">
            <button id="prevBtn" onclick="prevPage()">Previous Page</button>
            <button id="nextBtn" onclick="nextPage()">Next Page</button>
            <table id="contacts" cellpadding="0" cellspacing="0" border="0">
                <thead>
                    <tr>
                        <th>First&nbspName</th>
                        <th>Last&nbspName</th>
                        <th>Phone</th>
                        <th>Email</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="tbody"></tbody>
            </table>
            <p id="page-info"></p>
        </div>
    </div>
    <div class="main"></div>

    <script>
        let contacts = []; // Holds all contacts
        let currentPage = 1;
        const pageSize = 8;

        function setupPagination() {
            contacts = getContacts(); // Fetch contacts from storage or API
            showPage(currentPage);
        }

        function showPage(page) {
            let tbody = document.getElementById("tbody");
            tbody.innerHTML = ""; // Clear table

            let start = (page - 1) * pageSize;
            let end = start + pageSize;
            let paginatedContacts = contacts.slice(start, end);

            paginatedContacts.forEach(contact => {
                let row = document.createElement("tr");
                row.innerHTML = `
                    <td>${contact.firstName}</td>
                    <td>${contact.lastName}</td>
                    <td>${contact.phone}</td>
                    <td>${contact.email}</td>
                    <td><button onclick="deleteContact('${contact.id}')">Delete</button></td>
                `;
                tbody.appendChild(row);
            });

            document.getElementById("page-info").textContent = `Page ${currentPage} of ${Math.ceil(contacts.length / pageSize)}`;
            document.getElementById("prevBtn").disabled = currentPage === 1;
            document.getElementById("nextBtn").disabled = currentPage === Math.ceil(contacts.length / pageSize);
        }

        function prevPage() {
            if (currentPage > 1) {
                currentPage--;
                showPage(currentPage);
            }
        }

        function nextPage() {
            if (currentPage < Math.ceil(contacts.length / pageSize)) {
                currentPage++;
                showPage(currentPage);
            }
        }

        function getContacts() {
            // Replace this with actual data fetching logic
            return [
                { id: 1, firstName: "John", lastName: "Doe", phone: "123-456-7890", email: "john@example.com" },
                { id: 2, firstName: "Jane", lastName: "Smith", phone: "987-654-3210", email: "jane@example.com" },
                { id: 3, firstName: "Alice", lastName: "Brown", phone: "555-666-7777", email: "alice@example.com" },
                { id: 4, firstName: "Bob", lastName: "White", phone: "111-222-3333", email: "bob@example.com" },
                { id: 5, firstName: "Charlie", lastName: "Black", phone: "444-555-6666", email: "charlie@example.com" },
                { id: 6, firstName: "David", lastName: "Green", phone: "777-888-9999", email: "david@example.com" },
                { id: 7, firstName: "Eve", lastName: "Blue", phone: "333-444-5555", email: "eve@example.com" },
                { id: 8, firstName: "Frank", lastName: "Gray", phone: "999-000-1111", email: "frank@example.com" },
                { id: 9, firstName: "Grace", lastName: "Purple", phone: "222-333-4444", email: "grace@example.com" },
                { id: 10, firstName: "Hank", lastName: "Yellow", phone: "666-777-8888", email: "hank@example.com" }
            ];
        }
    </script>
</body>
</html>
